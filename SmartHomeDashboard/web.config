<?xml version="1.0" encoding="utf-8"?>
<configuration>
	<system.webServer>
		<!-- Host ASP.NET Core via ANCM v2 -->
		<handlers>
			<add name="aspNetCore" path="*" verb="*" modules="AspNetCoreModuleV2" resourceType="Unspecified" />
		</handlers>

		<!-- Self-contained publish: run the app's EXE directly -->
		<aspNetCore processPath=".\SmartHomeDashboard.exe"
					arguments=""
					stdoutLogEnabled="false"
					stdoutLogFile=".\logs\stdout"
					hostingModel="inprocess">
			<environmentVariables>
				<!-- Set to Development only when you need detailed errors on the server -->
				<environmentVariable name="ASPNETCORE_ENVIRONMENT" value="Production" />
			</environmentVariables>
		</aspNetCore>

		<!-- Ensure JSON serves with the correct MIME type (for App_Data APIs, etc.) -->
		<staticContent>
			<remove fileExtension=".json" />
			<mimeMap fileExtension=".json" mimeType="application/json" />
		</staticContent>
	</system.webServer>
</configuration>
